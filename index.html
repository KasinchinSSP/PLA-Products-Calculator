<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="theme-color" content="#ffffff" />
    <title>PLA Premium Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;700&display=swap");
      :root {
        --safe-bottom: env(safe-area-inset-bottom);
      }
      body {
        font-family: "Sarabun", sans-serif;
      }
      .badge {
        font-size: 11px;
      }
      .fade {
        transition: opacity 0.25s ease;
      }
      /* segmented active state (ใช้กับปุ่มเพศ) */
      [role="tablist"] .aria-selected\:bg-indigo-600[aria-selected="true"] {
        background: #4f46e5;
        color: #fff;
      }
      /* ไม่ใช้ bottom-sheet แล้ว */
      #result-container .grabber {
        display: none;
      }
    </style>
  </head>
  <body class="bg-gray-50 min-h-screen">
    <header class="bg-white border-b sticky top-0 z-10">
      <div
        class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between"
      >
        <div class="flex items-center gap-2">
          <h1 class="text-lg md:text-xl font-bold text-gray-800">
            PLA Premium Calculator
          </h1>
          <span
            id="dataset-version"
            class="badge px-2 py-0.5 rounded bg-gray-100 text-gray-600"
            >v-</span
          >
        </div>
        <div id="dataset-updated" class="text-xs text-gray-500">อัปเดต —</div>
      </div>
    </header>

    <!-- layout: mobile = stack, desktop = 2 columns -->
    <main
      class="max-w-6xl mx-auto px-4 pb-28 lg:pb-24 lg:grid lg:grid-cols-12 lg:gap-6"
      style="padding-bottom: calc(7rem + var(--safe-bottom))"
    >
      <!-- LEFT: form inputs -->
      <div class="lg:col-span-7 space-y-4 mt-2">
        <!-- Status -->
        <div
          id="status"
          class="mt-3 text-sm rounded-lg border p-3 bg-white text-gray-700"
        >
          กำลังโหลดข้อมูลผลิตภัณฑ์…
        </div>

        <!-- Plan -->
        <section class="bg-white rounded-2xl shadow p-4 space-y-3">
          <div class="flex items-center justify-between">
            <h2 class="text-base font-semibold">เลือกแบบประกัน</h2>
          </div>
          <div>
            <label for="plan" class="sr-only">แบบประกัน</label>
            <select
              id="plan"
              class="w-full h-9 rounded-md border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 pl-2"
            ></select>
          </div>
        </section>

        <!-- Insured Info -->
        <section class="bg-white rounded-2xl shadow p-4 space-y-3">
          <h2 class="text-base font-semibold">ข้อมูลผู้เอาประกัน</h2>
          <!-- Gender segmented -->
          <div>
            <span class="block text-sm text-gray-600 mb-2">เพศ</span>
            <div
              class="grid grid-cols-2 gap-2"
              role="tablist"
              aria-label="gender"
            >
              <button
                type="button"
                data-g="female"
                class="gender-btn h-11 rounded-lg border text-center font-medium aria-selected:bg-indigo-600 aria-selected:text-white"
              >
                หญิง
              </button>
              <button
                type="button"
                data-g="male"
                class="gender-btn h-11 rounded-lg border text-center font-medium aria-selected:bg-indigo-600 aria-selected:text-white"
              >
                ชาย
              </button>
            </div>
            <!-- hidden select used by JS -->
            <select id="gender" class="hidden">
              <option value="female">female</option>
              <option value="male">male</option>
            </select>
          </div>

          <!-- Age stepper -->
          <div>
            <label for="age" class="block text-sm text-gray-600 mb-2"
              >อายุ (ปี)</label
            >
            <div class="flex items-stretch">
              <button
                type="button"
                id="age-dec"
                class="w-12 h-11 border rounded-l-md text-xl"
              >
                −
              </button>
              <input
                type="number"
                id="age"
                inputmode="numeric"
                pattern="[0-9]*"
                class="h-11 flex-1 border-y text-center focus:outline-none"
                placeholder="อายุ"
              />
              <button
                type="button"
                id="age-inc"
                class="w-12 h-11 border rounded-r-md text-xl"
              >
                +
              </button>
            </div>
            <p id="age-hint" class="mt-2 text-xs text-gray-500"></p>
          </div>
        </section>

        <!-- Sum Assured -->
        <section class="bg-white rounded-2xl shadow p-4 space-y-3">
          <h2 class="text-base font-semibold">ทุนเอาประกัน</h2>
          <div>
            <label for="sumAssured" class="sr-only">ทุนเอาประกัน</label>
            <input
              type="number"
              id="sumAssured"
              step="10000"
              inputmode="numeric"
              pattern="[0-9]*"
              class="h-11 w-full rounded-md border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"
              placeholder="ระบุทุน (บาท)"
            />
            <p id="sum-assured-hint" class="mt-2 text-xs text-gray-500"></p>
          </div>
          <!-- Quick chips (ปุ่มแรก = ทุนขั้นต่ำแบบ dynamic) -->
          <div class="flex flex-wrap gap-2">
            <button
              type="button"
              id="chip-min"
              class="chip px-3 h-9 rounded-full bg-indigo-600 text-white text-sm font-medium"
              data-sa="0"
            >
              —
            </button>
            <button
              type="button"
              data-sa="500000"
              class="chip px-3 h-9 rounded-full bg-indigo-600 text-white text-sm font-medium"
            >
              500,000
            </button>
            <button
              type="button"
              data-sa="1000000"
              class="chip px-3 h-9 rounded-full bg-indigo-600 text-white text-sm font-medium"
            >
              1,000,000
            </button>
            <button
              type="button"
              data-sa="2000000"
              class="chip px-3 h-9 rounded-full bg-indigo-600 text-white text-sm font-medium"
            >
              2,000,000
            </button>
          </div>
        </section>
      </div>

      <!-- RIGHT: result inline (ไม่ใช่ pop-up/modal) -->
      <section
        id="result-container"
        class="mt-4 lg:mt-3 lg:col-span-5 bg-white rounded-2xl shadow p-4 space-y-3 self-start"
      >
        <div class="text-sm text-gray-500">
          ผลการคำนวณจะแสดงที่นี่หลังจากกด “คำนวณเบี้ยประกัน”
        </div>
      </section>
    </main>

    <!-- CTA bar: mobile = เต็มกว้าง, desktop = เท่าข้อความ -->
    <div class="bg-white border-t">
      <div class="max-w-6xl mx-auto px-4 py-4">
        <button
          id="calculate-btn"
          class="h-16 font-bold text-white bg-indigo-600 hover:bg-indigo-800 w-full lg:w-auto lg:px-8 lg:rounded-lg"
        >
          คำนวณเบี้ยประกัน
        </button>
      </div>
    </div>

    <script src="calculator.js"></script>
  </body>
</html>
