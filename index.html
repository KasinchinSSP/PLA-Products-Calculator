<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>เครื่องคำนวณเบี้ยประกันอัจฉริยะ v3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;700&display=swap");
      body {
        font-family: "Sarabun", sans-serif;
      }
      .badge {
        font-size: 11px;
      }
      fieldset:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      .fade {
        transition: opacity 0.25s ease;
      }
      /* ปุ่ม segmented */
      [role="tablist"] .aria-selected\:bg-indigo-600[aria-selected="true"] {
        background: #4f46e5;
        color: #fff;
      }

      /* Bottom sheet สวยๆ */
      #result-container.open {
        transform: translateY(0);
      }
      #result-container > .sheet {
        max-width: 44rem;
        margin: 0 auto;
        background: #fff;
        border-top-left-radius: 16px;
        border-top-right-radius: 16px;
        box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.08);
      }
      #result-container .grabber {
        width: 38px;
        height: 4px;
        border-radius: 999px;
        background: #e5e7eb;
        margin: 8px auto;
      }
    </style>
  </head>
  <body class="bg-gray-50 min-h-screen">
    <header class="bg-white border-b sticky top-0 z-10">
      <div
        class="max-w-3xl mx-auto px-4 py-3 flex items-center justify-between"
      >
        <div class="flex items-center gap-2">
          <h1 class="text-lg md:text-xl font-bold text-gray-800">
            เครื่องคำนวณเบี้ยประกันอัจฉริยะ
          </h1>
          <span
            id="dataset-version"
            class="badge px-2 py-0.5 rounded bg-gray-100 text-gray-600"
            >v—</span
          >
        </div>
        <div id="dataset-updated" class="text-xs text-gray-500">อัปเดต —</div>
      </div>
    </header>

    <main class="max-w-md mx-auto pb-28 px-4">
      <!-- เว้นที่ด้านล่างสำหรับ Sticky CTA -->
      <!-- Info/Version -->
      <div
        id="status"
        class="mt-3 text-sm rounded-lg border p-3 bg-white text-gray-700"
      >
        กำลังโหลดข้อมูลผลิตภัณฑ์…
      </div>

      <!-- Plan -->
      <section class="mt-4 bg-white rounded-2xl shadow p-4 space-y-3">
        <div class="flex items-center justify-between">
          <h2 class="text-base font-semibold">เลือกแบบประกัน</h2>
          <span
            id="dataset-version"
            class="text-[11px] px-2 py-0.5 rounded bg-gray-100 text-gray-600"
            >v—</span
          >
        </div>
        <div>
          <label for="plan" class="sr-only">แบบประกัน</label>
          <select
            id="plan"
            class="w-full h-11 rounded-md border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"
          ></select>
          <p id="dataset-updated" class="mt-2 text-xs text-gray-500">
            อัปเดต —
          </p>
        </div>
      </section>

      <!-- Insured Info -->
      <section class="mt-4 bg-white rounded-2xl shadow p-4 space-y-3">
        <h2 class="text-base font-semibold">ข้อมูลผู้เอาประกัน</h2>
        <!-- Gender segmented -->
        <div>
          <span class="block text-sm text-gray-600 mb-2">เพศ</span>
          <div
            class="grid grid-cols-2 gap-2"
            role="tablist"
            aria-label="gender"
          >
            <button
              type="button"
              data-g="female"
              class="gender-btn h-11 rounded-lg border text-center font-medium aria-selected:bg-indigo-600 aria-selected:text-white"
            >
              หญิง
            </button>
            <button
              type="button"
              data-g="male"
              class="gender-btn h-11 rounded-lg border text-center font-medium aria-selected:bg-indigo-600 aria-selected:text-white"
            >
              ชาย
            </button>
          </div>
          <select id="gender" class="hidden">
            <option value="female">female</option>
            <option value="male">male</option>
          </select>
        </div>

        <!-- Age stepper -->
        <div>
          <label for="age" class="block text-sm text-gray-600 mb-2"
            >อายุ (ปี)</label
          >
          <div class="flex items-stretch">
            <button
              type="button"
              id="age-dec"
              class="w-12 h-11 border rounded-l-md text-xl"
            >
              −
            </button>
            <input
              type="number"
              id="age"
              inputmode="numeric"
              class="h-11 flex-1 border-y text-center focus:outline-none"
              placeholder="อายุ"
            />
            <button
              type="button"
              id="age-inc"
              class="w-12 h-11 border rounded-r-md text-xl"
            >
              +
            </button>
          </div>
          <p id="age-hint" class="mt-2 text-xs text-gray-500"></p>
        </div>
      </section>

      <!-- Sum Assured -->
      <section class="mt-4 bg-white rounded-2xl shadow p-4 space-y-3">
        <h2 class="text-base font-semibold">ทุนเอาประกัน</h2>
        <div>
          <label for="sumAssured" class="sr-only">ทุนเอาประกัน</label>
          <input
            type="number"
            id="sumAssured"
            step="10000"
            inputmode="numeric"
            class="h-11 w-full rounded-md border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"
            placeholder="ระบุทุน (บาท)"
          />
          <p id="sum-assured-hint" class="mt-2 text-xs text-gray-500"></p>
        </div>
        <!-- Quick chips -->
        <div class="flex flex-wrap gap-2">
          <button
            type="button"
            data-sa="1000000"
            class="chip px-3 h-9 rounded-full border text-sm"
          >
            1,000,000
          </button>
          <button
            type="button"
            data-sa="2000000"
            class="chip px-3 h-9 rounded-full border text-sm"
          >
            2,000,000
          </button>
          <button
            type="button"
            data-sa="3000000"
            class="chip px-3 h-9 rounded-full border text-sm"
          >
            3,000,000
          </button>
          <button
            type="button"
            data-sa="5000000"
            class="chip px-3 h-9 rounded-full border text-sm"
          >
            5,000,000
          </button>
        </div>
      </section>

      <!-- Modal factors (segmented; แสดงเพื่อเน้น UX แม้คำนวณทุกงวดอยู่แล้ว) -->
      <section class="mt-4 bg-white rounded-2xl shadow p-4 space-y-3">
        <h2 class="text-base font-semibold">งวดชำระ (ไฮไลต์)</h2>
        <div class="grid grid-cols-4 gap-2" role="tablist" aria-label="modal">
          <button
            type="button"
            data-modal="annual"
            class="modal-btn h-10 rounded-lg border text-sm aria-selected:bg-indigo-600 aria-selected:text-white"
          >
            ปี
          </button>
          <button
            type="button"
            data-modal="semi"
            class="modal-btn h-10 rounded-lg border text-sm"
          >
            6ด.
          </button>
          <button
            type="button"
            data-modal="quarter"
            class="modal-btn h-10 rounded-lg border text-sm"
          >
            3ด.
          </button>
          <button
            type="button"
            data-modal="month"
            class="modal-btn h-10 rounded-lg border text-sm"
          >
            เดือน
          </button>
        </div>
        <p class="text-xs text-gray-500">
          *ระบบยังคำนวณครบ 4 งวดเหมือนเดิม—ตัวนี้แค่ใช้ไฮไลต์ในผลลัพธ์
        </p>
      </section>
    </main>

    <!-- Sticky CTA -->
    <div class="fixed bottom-0 left-0 right-0 bg-white border-t p-4">
      <button
        id="calculate-btn"
        class="w-full h-12 rounded-xl text-white bg-indigo-600 hover:bg-indigo-700"
      >
        คำนวณเบี้ยประกัน
      </button>
    </div>

    <!-- Bottom Sheet: ใช้ #result-container เดิม -->
    <div
      id="result-container"
      class="fixed inset-x-0 bottom-0 translate-y-full transition-transform duration-200"
    >
      <!-- calculator.js จะเติมเนื้อหาอยู่ภายในกล่องนี้ตามเดิม -->
    </div>

    <script src="calculator.js"></script>
  </body>
</html>
